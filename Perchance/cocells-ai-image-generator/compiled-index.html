<!DOCTYPE html>

<head>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="../assets/styles.css" />
  <style>
.aimg-container {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.aimg-output-container {
  flex-grow: 1;
  overflow: auto;
  position: relative;
}

@keyframes aimg-block-load {
  from {
    transform: scale(0.6);
    opacity: 0;
  }

  to {
    transform: scale(1);
    opacity: 1;
  }
}

.aimg-output-block {
  transition: height 0.2s;
  display: inline-block;
  overflow: hidden;
  animation: aimg-block-load 0.8s cubic-bezier(1, 0, 0, 1) 1;
}

#aimg-output {
  padding: var(--d-10px);
  flex: 1;
  display: flex;
  justify-items: center;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--d-1rem);
  transition: gap 0.4s cubic-bezier(1, 0, 0, 1);
  transition-delay: 0.3s;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 2fr));
  grid-row-gap: 100px;
}

#aimg-outputs-shadow {
  bottom: 0;
  width: 100%;
  height: 30px;
  --tensra: 90%;
  background: linear-gradient(transparent, var(--shadow-color) var(--tensra));
}

#aimg[aimg-state-running] #aimg-outputs-shadow {
  height: 40px;
}

.aimg-img {
  display: inline-block;
  border-radius: 1rem;
}

.aimg-output-twiga {
  justify-content: center;
  margin-bottom: 0;
  text-align: center;
}

#aimg[aimg-state-running] .aimg-output-twiga {
  margin-bottom: 10px;
}

.aimg-output-en-twiga {
  display: flex;
  justify-content: center;
}

.aimg-output-en-twiga div {
  flex: 1;
  display: flex;
}

.aimg-output-en-twiga button {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

.aimg-output-en-twiga button span {
  margin-right: 5px;
}

.aimg-output-flow-countdown-span {
  height: 0;
  overflow: hidden;
  margin-block: 0;
  transition-property: height, margin;
  transition-duration: 0.5s;
}

#aimg[aimg-state-auto-flow] .aimg-output-flow-countdown-span {
  height: 18px;
  margin-block: 10px;
}

#aimg-output-twiga-id {
  /*height: 0;*/
  overflow: hidden;
}

#aimg[aimg-state-running] #aimg-output-twiga-id {
  height: 120px;
}

#aimg[aimg-state-auto-flow] .auto-creation-button,
#aimg .stop-auto-creation-button {
  display: none;
}

#aimg[aimg-state-auto-flow] .stop-auto-creation-button {
  display: flex;
}

#aimg .stop-auto-creation-button {
  color: #f53131;
}

.dark #aimg .stop-auto-creation-button {
  color: #ff5e5e;
}

.aimg-output-twiga .aimg-output-vr {
  border-left: 1px solid;
  height: 30px;
  margin-inline: 10px;
}

.aimg-output-twiga .aimg-output-vr {
  border-color: var(--light-gray-accent);
}

.dark .aimg-output-twiga .aimg-output-vr {
  border-color: var(--dark-gray-accent);
}

.aimg-prompt-pre-wrapper {
  padding: var(--d-10px);
  display: flex;
  justify-content: center;
}

.aimg-prompt-wrapper {
  max-width: 700px;
  width: 100%;
  border-radius: 1rem;
  overflow: hidden;
  border: 1px solid var(--accent);
}

.dark .aimg-prompt-wrapper {
  border-color: var(--dark-gray-accent);
}

.aimg-prompt {
  position: relative;
  display: flex;
}

.aimg-textarea-wrapper {
  flex-grow: 1;
  display: flex;
}

.aimg-prompt textarea {
  resize: none;
  flex-grow: 1;
  padding: 10px;
  padding-right: 58px;
  transition: 0.5s, color 0s;
  height: 36px;
  text-align: justify;
}

.aimg-button-wrapper {
  display: flex;
  align-items: end;
  justify-content: center;
  position: absolute;
  bottom: 10px;
  right: 10px;
}

.aimg-prompt-overlay {
  background: transparent;
  transition: 0.5s;
  cursor: pointer;
}

.aimg-close-extra:active,
.dark .aimg-close-extra:active {
  background: transparent;
}

.aimg-toggle-bg-quick:hover {
  background: #18181840;
}

.dark .aimg-toggle-bg-quick:hover {
  background: #3a3e42bb;
}

.aimg-toggle .aimg-prompt-overlay {
  display: none;
}

.aimg-toggle .aimg-prompt textarea {
  height: 120px;
}

.aimg-toggle .aimg-output-overlay {
  background: #18181840;
}

.aimg-prompt-extra {
  height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  --def-value: 8px;
}

.aimg-toggle .aimg-prompt-extra {
  height: 50vh;
  position: relative;
}

.aimg-extra-wrapper {
  flex-grow: 1;
  overflow-y: auto;
}

.aimg-extra-wrapper-wrapper {
  padding: var(--def-value);
  padding-bottom: 0;
  gap: var(--def-value);
}

.aimg-extra-wrapper-wrapper input,
.aimg-extra-wrapper-wrapper select,
.aimg-extra-wrapper-wrapper textarea {
  padding: var(--def-value);
  background: #c5cbcc75;
  background: #f6f9fb;
}

.dark .aimg-extra-wrapper-wrapper input,
.dark .aimg-extra-wrapper-wrapper select,
.dark .aimg-extra-wrapper-wrapper textarea {
  background: #38393fa6;
  background: #1d1d1d;
}

.aimg-extra-opt-card {
  padding: var(--def-value);
  border-radius: var(--def-value);
  background: #eaeef0;
  background: #dbdfe2;
}

.dark .aimg-extra-opt-card {
  background: #343436;
}

.aimg-extra-opt-label {
  text-align: left;
  font-size: 12px;
  margin-bottom: var(--def-value);
  user-select: none;
  font-weight: 700;
  background: transparent;
}

.aimg-extra-opt-card .aimg-extra-opts {
  display: flex;
}

.aimg-extra-opt-card .aimg-extra-opts input,
.aimg-extra-opt-card .aimg-extra-opts select,
.aimg-extra-opt-card .aimg-extra-opts textarea {
  padding: var(--def-value);
  width: 100%;
  border-radius: var(--def-value);
}

.aimg-close-extra,
.dark .aimg-close-extra {
  background: transparent;
  height: 20px;
  transition: background 0.5s;
  padding: var(--def-value);
  border-radius: 0.5rem;
  text-align: center;
  cursor: pointer;
  user-select: none;
  flex: 1;
}

.aimg-extra-hr {
  margin-top: var(--def-value);
  border-bottom: 1px solid;
  border-color: var(--light-gray-accent);
}

.aimg-extra-vr {
  border-left: 1px solid;
  border-color: var(--light-gray-accent);
}

.dark .aimg-extra-hr,
.dark .aimg-extra-vr {
  border-color: var(--dark-gray-accent);
}
</style>
</head>

<body>
  <div class="page-load bg-foreground pos-fixed full-overlay" id="page-load-id">
    <div class="page-load-shadow pos-absolute full-overlay"></div>
    <div class="pos-absolute">
      <div class="page-wrapper">
        <h1 class="zen-title zen-sp">[$meta.title]</h1>
        <div class="page-load-indication">
          <div class="page-load-indication-bar pos-absolute"></div>
        </div>
        <div class="page-load-text">Please wait, the page is loading.</div>
      </div>
    </div>
  </div>
  <div id="main-body-id" class="main-body no-size-tran">
    <header id="header-id">
      <div class="main-header zen-ui">
        <button class="side-drawer-header" onclick="sideMenuDrawer()">
          <span class="material-symbols-rounded" style="margin-top: 4px;">
            menu
          </span>
        </button>
        <button onclick="$Fullscreen()">
          <span class="material-symbols-rounded open-fullscreen">
            fit_screen
          </span>
          <span class="material-symbols-rounded close-fullscreen">
            fullscreen_exit
          </span>
        </button>
        <button class="darkmode-button" onclick="darkmode()">
          <span class="material-symbols-rounded light-mode"> light_mode </span>
          <span class="material-symbols-rounded dark-mode"> dark_mode </span>
        </button>
      </div>
    </header>
    <main>
      <div class="main-wint-body over-hidden">
        <nav class="side-menu-container">
          <div class="side-menu">
            <div class="side-menu-wrapper">
              <div class="side-menu-wrapper-wrapper">
                <section id="tabsContainer">
                  <button class="tabs" name="aimg">
                    <div class="tabs-icon">
                      <span class="material-symbols-rounded"> image </span>
                    </div>
                    <div class="tabs-text" ser>AI Image</div>
                    <div class="tabs-shadow-wrapper">
                      <div class="tabs-shadow"></div>
                    </div>
                  </button>

                  <button class="tabs" name="chat">
                    <div class="tabs-icon">
                      <span class="material-symbols-rounded"> chat </span>
                    </div>
                    <div class="tabs-text" ser>Chat</div>
                    <div class="tabs-shadow-wrapper">
                      <div class="tabs-shadow"></div>
                    </div>
                  </button>

                  <button class="tabs" name="gallery">
                    <div class="tabs-icon">
                      <span class="material-symbols-rounded">
                        gallery_thumbnail
                      </span>
                    </div>
                    <div class="tabs-text" ser>Gallery</div>
                    <div class="tabs-shadow-wrapper">
                      <div class="tabs-shadow"></div>
                    </div>
                  </button>
                </section>
              </div>
            </div>
          </div>
          <div class="side-menu-drawer">
            <div class="side-menu-container-button">
              <button id="menu-drawer" onclick="sideMenuDrawer()">
                <span class="material-symbols-rounded arrow">
                  arrow_back_ios_new
                </span>
                <span class="material-symbols-rounded close"> close </span>
              </button>
            </div>
          </div>
        </nav>
        <div class="window-panel bg-foreground d-round1">
          <div class="tab-window" name="aimg" id="aimg">
            <div class="aimg-container">
              <div class="aimg-output-container no-scroll-from-mid">
                <div style="height: 100%;" class="no-scroll-from-mid flexC">
                  <div id="aimg-output">
                    <style>
                      .x-3-e-f-2 * {
                        text-align: center;
                        color: var(--text-lighter);
                      }

                      .x-3-e-f-2 span {
                        color: hsl(0deg 100% 60%);
                        font-weight: bold;
                      }
                    </style>
                    <div class="x-3-e-f-2">
                      <div>Write your prompt and start generating.</div>
                      <div>
                        Please be descriptive to avoid generating
                        <span>distored</span> images.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="aimg-output-overlay" onclick="aimgToggle()"></div>
              <div class="aimg">
                <div class="aimg-prompt-pre-wrapper">
                  <div class="aimg-prompt-wrapper">
                    <div class="aimg-prompt-extra">
                      <div class="aimg-extra-wrapper hover-scroll">
                        <div class="aimg-extra-wrapper-wrapper flexC">
                          <!-- Start >>> -->
                          <div class="aimg-extra-opt-card" aria-label="Negative prompt">
                            <div class="aimg-extra-opt-label">
                              Negative Prompt
                            </div>
                            <div class="aimg-extra-opts">
                              <input class="aimg-save-data" id="aimg-negative-prompt" type="text" />
                            </div>
                          </div>

                          <div class="aimg-extra-opt-card" aria-label="Image amount">
                            <div class="aimg-extra-opt-label">Image Amount</div>
                            <div class="aimg-extra-opts">
                              <input id="aimg-amount" type="number" min="1" max="26" value="4" />
                            </div>
                          </div>

                          <div class="aimg-extra-opt-card" aria-label="Image styles">
                            <div class="aimg-extra-opt-label">Styles</div>
                            <div class="aimg-extra-opts">
                              <select id="aimg-styles" class="aimg-save-data">
                                <option value="painted_anime">
                                  Painted Anime
                                </option>
                                <option value="soft_anime">Soft Anime</option>
                                <option value="cute_anime">Cute Anime</option>
                                <option value="no_style">🔴 No Style</option>
                                <option value="studio_ghibli">
                                  Studio Ghibli
                                </option>
                                <option value="manga">Manga</option>
                                <option value="neon_vintage_anime">
                                  Neon Vintage Anime
                                </option>
                                <option value="concept_art">Concept Art</option>
                                <option value="anime_pixel_art">
                                  Anime Pixel Art
                                </option>
                                <option value="game_style">Game Style</option>
                                <option value="digital_art">Digital Art</option>
                              </select>
                            </div>
                          </div>

                          <div class="aimg-extra-opt-card" aria-label="Image Size">
                            <div class="aimg-extra-opt-label">Size</div>
                            <div class="aimg-extra-opts">
                              <select id="aimg-size" class="aimg-save-data">
                                <option value="portrait">Portrait</option>
                                <option value="landscape">Landscape</option>
                                <option value="square">Square</option>
                              </select>
                            </div>
                          </div>

                          <div class="aimg-extra-opt-card" aria-label="Image Author">
                            <div class="aimg-extra-opt-label">
                              Author's name
                            </div>
                            <div class="aimg-extra-opts">
                              <input class="aimg-save-data" id="authors-name" type="text"
                                placeholder="You should write your name if you plan to share it in the gallery." />
                            </div>
                          </div>

                          <div class="aimg-extra-opt-card">
                            <div class="aimg-extra-opt-label">Notepad</div>
                            <div class="aimg-extra-opts">
                              <textarea style="resize: vertical;" class="aimg-save-data" name="notepad" id="te"
                                cols="30" rows="10"
                                placeholder="A little notepad for you to save some text if you need."></textarea>
                            </div>
                          </div>
                          <!-- Start <<< -->
                        </div>
                      </div>

                      <div style="padding: var(--def-value);" class="flexC">
                        <button class="aimg-toggle-bg-quick aimg-close-extra" onclick="aimgToggle()"
                          style="padding: 0; overflow: hidden;">
                          <div style="padding: var(--def-value);">Close</div>
                          <div class="shine-pre-container">
                            <div class="shine-en-container">
                              <div class="shine-object-bg">
                                <div class="shine-object-fg"></div>
                              </div>
                            </div>
                          </div>
                        </button>
                        <div class="aimg-extra-hr"></div>
                      </div>
                    </div>
                    <div class="aimg-prompt">
                      <div class="aimg-textarea-wrapper">
                        <div class="aimg-prompt-overlay pos-absolute full-overlay aimg-toggle-bg-quick"
                          onclick="aimgToggle()">
                          <div class="shine-pre-container" style="--shine-top: -50px;">
                            <div class="shine-en-container">
                              <div class="shine-object-bg">
                                <div class="shine-object-fg"></div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <textarea class="aimg-save-data" name="aimg-textarea" id="aimg-textarea-id"
                          placeholder="Type a prompt."></textarea>
                      </div>
                      <div class="aimg-button-wrapper">
                        <button class="bt-mat-icon-anim mat-icon-anim-zoom" id="aimg-generate-button"
                          style="transition-delay: 0s;" onclick="createAimg(); aimgStateApply('running')">
                          <span class="material-symbols-rounded mat-1">
                            draw
                          </span>
                          <span class="material-symbols-rounded mat-2">
                            add
                          </span>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-window" style="overflow: hidden;" name="chat">
            [chat(chatOne)]
          </div>
          <div class="tab-window" style="overflow: hidden;" name="gallery">
            [image(gallery)]
          </div>
        </div>
      </div>
    </main>
    <div class="backdrop" style="top: 0; left: 0;" onclick="sideMenuDrawer()"></div>
  </div>

  <script>
    function sideMenuDrawer() {
      var sideMenuContainer = document.getElementById("main-body-id");

      if (sideMenuContainer.classList.contains("side-menu-collapse")) {
        sideMenuContainer.classList.remove("side-menu-collapse");
      } else {
        sideMenuContainer.classList.add("side-menu-collapse");
      }
    }

    var tabs = document.querySelectorAll("#tabsContainer .tabs");
    var sideMenuButtons = document.getElementsByClassName(
      "side-menu-container-button"
    );

    // Function to check if the side menu collapse should be removed
    function checkScreenWidthAndCollapse() {
      var screenWidth = window.innerWidth;
      var mainBody = document.getElementById("main-body-id");

      if (
        screenWidth <= 800 &&
        mainBody.classList.contains("side-menu-collapse")
      ) {
        mainBody.classList.remove("side-menu-collapse");
      }
    }

    // Add event listener to tabs
    tabs.forEach(function (tab) {
      tab.addEventListener("click", checkScreenWidthAndCollapse);
    });

    // Loop through sideMenuButtons and add event listener
    for (var i = 0; i < sideMenuButtons.length; i++) {
      sideMenuButtons[i].addEventListener("click", checkScreenWidthAndCollapse);
    }

    // Add event listener to side menu drawer
    var sideMenuDrawerBtn = document.querySelector(".side-menu-drawer");
    sideMenuDrawerBtn.addEventListener("click", function () {
      var screenWidth = window.innerWidth;
      var mainBody = document.getElementById("main-body-id");

      if (
        screenWidth <= 800 &&
        mainBody.classList.contains("side-menu-collapse")
      ) {
        mainBody.classList.remove("side-menu-collapse");
      }
    });

    function checkPageLoad() {
      // Check if there is a 'sealed' attribute in sessionStorage
      if (sessionStorage.getItem("sealed")) {
        applySealed();
      } else {
        // Check if all resources are loaded
        if (document.readyState === "complete") {
          setTimeout(() => {
            addClosedAttribute();
            saveToSessionStorage();
            setTimeout(() => {
              applySealed();
            }, 300);
          }, 1500);
        } else {
          // If resources are not loaded, wait for them to load
          setTimeout(checkPageLoad, 100);
        }
      }
    }

    function addClosedAttribute() {
      const pageLoadElement = document.getElementById("page-load-id");
      if (pageLoadElement) {
        pageLoadElement.setAttribute("closed", "");
      }
    }

    function applySealed() {
      const pageLoadElement = document.getElementById("page-load-id");
      if (pageLoadElement) {
        pageLoadElement.setAttribute("sealed", "");
      }
    }

    function saveToSessionStorage() {
      sessionStorage.setItem("sealed", "true");
    }

    checkPageLoad();
  </script>
  <script>
    // # Aimg scripts
    function aimgToggle() {
      var element = document.getElementById("aimg");
      if (element.classList.contains("aimg-toggle")) {
        element.classList.remove("aimg-toggle");
      } else {
        element.classList.add("aimg-toggle");
      }
    }

    window.addEventListener("load", function () {
      // Iterate through each element with the class 'aimg-save-data'
      document.querySelectorAll(".aimg-save-data").forEach(function (element) {
        // Get the ID of the current element
        var elementId = element.id;

        // Check if there is a value stored in local storage for this element
        var storedValue = localStorage.getItem(elementId);

        // If a value is found in local storage, set the value of the element
        if (storedValue !== null) {
          element.value = storedValue;
        } else {
          // If not found, save the current value of the element to local storage
          localStorage.setItem(elementId, element.value);
        }

        // Add event listener to listen for changes in the element's value
        element.addEventListener("input", function () {
          // Update local storage with the new value
          localStorage.setItem(elementId, element.value);
        });
      });
    });

    function aimgStateApply(state) {
      // Format the state parameter
      var formattedState = "aimg-state-" + state;

      // Get the element with the ID 'aimg'
      var aimgElement = document.getElementById("aimg");

      // Check if the element exists
      if (aimgElement) {
        // Add the formatted state as a custom attribute to the element
        aimgElement.setAttribute(formattedState, "");
      } else {
        console.error("Element with ID 'aimg' not found.");
      }
    }

    function removeAimgStates() {
      // Get the element with the ID 'aimg'
      var aimgElement = document.getElementById("aimg");

      // Check if the element exists
      if (aimgElement) {
        // Get all attributes of the element
        var attributes = aimgElement.attributes;

        // Loop through the attributes
        for (var i = 0; i < attributes.length; i++) {
          // Check if the attribute name starts with 'aimg-state-'
          if (attributes[i].name.startsWith("aimg-state-")) {
            // Remove the attribute
            aimgElement.removeAttribute(attributes[i].name);
            // Decrement the loop index to account for removed attribute
            i--;
          }
        }
      } else {
        console.error("Element with ID 'aimg' not found.");
      }
    }

    function aimgStateRemove(state) {
      // Format the state parameter
      var formattedState = "aimg-state-" + state;

      // Get the element with the ID 'aimg'
      var aimgElement = document.getElementById("aimg");

      // Check if the element exists
      if (aimgElement) {
        // Check if the attribute exists
        if (aimgElement.hasAttribute(formattedState)) {
          // Remove the attribute
          aimgElement.removeAttribute(formattedState);
        } else {
          console.warn(
            "Attribute '" +
            formattedState +
            "' not found on element with ID 'aimg'."
          );
        }
      } else {
        console.error("Element with ID 'aimg' not found.");
      }
    }

    document.addEventListener("load", function () {
      const textArea = document.getElementById("aimg-textarea-id");
      const generateButton = document.getElementById("aimg-generate-button");

      if (textArea && generateButton) {
        if (textArea.value.trim() === "") {
          generateButton.disabled = true;
        } else {
          generateButton.disabled = false;
        }

        // Add event listener for text changes (optional)
        textArea.addEventListener("input", function () {
          if (textArea.value.trim() === "") {
            generateButton.disabled = true;
          } else {
            generateButton.disabled = false;
          }
        });
      } else {
        // Handle the case where elements are not found (optional)
        console.error("Textarea or button element not found");
      }
    });

    // Get the element with id "aimg-amount"
    const aimgAmountInput = document.getElementById("aimg-amount");

    // Add event listener for the blur event
    aimgAmountInput.addEventListener("blur", function () {
      // Retrieve the min and max values
      const minValue = parseFloat(aimgAmountInput.min);
      const maxValue = parseFloat(aimgAmountInput.max);

      // Retrieve the current value
      let currentValue = parseFloat(aimgAmountInput.value);

      // Check if the current value is blank or undefined, set to 4
      if (!currentValue && currentValue !== 0) {
        currentValue = 4;
        console.log("Value is blank or undefined. Setting to 4.");
        // Set the new value
        aimgAmountInput.value = currentValue;
        return; // Exit the function after setting the value
      }

      // Log the current value before any modifications
      console.log("Before:", currentValue);

      // Check if the current value is within the range
      if (currentValue >= minValue && currentValue <= maxValue) {
        console.log("Value is within the range.");
        return; // Skip further execution
      }

      // If the current value is below the range, set it to the minimum
      if (currentValue < minValue) {
        console.log("Value is below the minimum. Setting to minimum.");
        currentValue = minValue;
      }
      // If the current value is above the range, set it to the maximum
      else if (currentValue > maxValue) {
        console.log("Value is above the maximum. Setting to maximum.");
        currentValue = maxValue;
      }

      // Log the reason for setting the value and the value after modification
      console.log("After:", currentValue);

      // Set the new value
      aimgAmountInput.value = currentValue;
    });

    // ***

    // ***

    // Get the value of the input with id="aimg-amount"
    function createAimg() {
      // Function to generate a random 9-character ID
      function generateRandomId() {
        const characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
        let id = "";
        for (let i = 0; i < 9; i++) {
          id += characters.charAt(
            Math.floor(Math.random() * characters.length)
          );
        }
        return id;
      }

      // Get the value of the input with id="aimg-amount"
      const aimg_amount = document.getElementById("aimg-amount").value;
      let aimg_output = document.getElementById("aimg-output");

      // Clear the previous content of aimg_output
      aimg_output.innerHTML = "";

      // Loop to create and append aimg blocks
      for (let i = 0; i < aimg_amount; i++) {
        // Generate random ID
        const randomId = generateRandomId();

        // Create aimg block using template literals
        const aimg_block = `<div class="aimg-output-block" id="${randomId}">[output]</div>`;

        // Append aimg block to "aimg-output"
        aimg_output.innerHTML += aimg_block.evaluateItem;
        // console.log(`Aimg appended > ${randomId}.`);

        // Call update function if it exists
        if (typeof update === "function") {
          update(randomId);
          console.log(`Updated ID: ${randomId}`);
        } else {
          console.error(
            `Failed to update ID: ${randomId}. 'update' function is not defined.`
          );
        }
      }
    }

    // Check if the textarea element exists
    var textarea = document.getElementById("aimg-textarea-id");
    if (textarea) {
      // Add event listener to the textarea for input events
      textarea.addEventListener("input", function () {
        try {
          // Replace aiImagePrompt's value with the textarea's value
          aiImagePrompt =
            textarea.value.trim() !== ""
              ? textarea.value.trim()
              : initialAiImagePrompt;
        } catch (error) {
          // Handle errors
          console.error(
            "An error occurred while updating aiImagePrompt:",
            error.message
          );
        }
      });
    } else {
      console.error('Textarea element with id "aimg-textarea-id" not found.');
    }
    // Fullscreen Script
    function $Fullscreen() {
      console.log("Entering $Fullscreen function...");

      // Check if fullscreen mode is currently active
      var isInFullScreen =
        (document.fullscreenElement && document.fullscreenElement !== null) ||
        (document.webkitFullscreenElement &&
          document.webkitFullscreenElement !== null) ||
        (document.mozFullScreenElement &&
          document.mozFullScreenElement !== null) ||
        (document.msFullscreenElement && document.msFullscreenElement !== null);

      console.log("isInFullScreen: ", isInFullScreen);

      // If not in fullscreen, request fullscreen
      if (!isInFullScreen) {
        console.log("Requesting fullscreen...");

        var element = document.documentElement;
        if (element.requestFullscreen) {
          console.log("Requesting fullscreen using requestFullscreen...");
          element.requestFullscreen();
        } else if (element.mozRequestFullScreen) {
          /* Firefox */
          console.log("Requesting fullscreen using mozRequestFullScreen...");
          element.mozRequestFullScreen();
        } else if (element.webkitRequestFullscreen) {
          /* Chrome, Safari & Opera */
          console.log("Requesting fullscreen using webkitRequestFullscreen...");
          element.webkitRequestFullscreen();
        } else if (element.msRequestFullscreen) {
          /* IE/Edge */
          console.log("Requesting fullscreen using msRequestFullscreen...");
          element.msRequestFullscreen();
        }

        // Add the 'in-fullscreen' class to the body
        console.log("Adding 'in-fullscreen' class to the body...");
        document.body.classList.add("in-fullscreen");
      } else {
        // If already in fullscreen, exit fullscreen
        console.log("Exiting fullscreen...");

        if (document.exitFullscreen) {
          console.log("Exiting fullscreen using exitFullscreen...");
          document.exitFullscreen();
        } else if (document.webkitExitFullscreen) {
          /* Safari */
          console.log("Exiting fullscreen using webkitExitFullscreen...");
          document.webkitExitFullscreen();
        } else if (document.mozCancelFullScreen) {
          /* Firefox */
          console.log("Exiting fullscreen using mozCancelFullScreen...");
          document.mozCancelFullScreen();
        } else if (document.msExitFullscreen) {
          /* IE/Edge */
          console.log("Exiting fullscreen using msExitFullscreen...");
          document.msExitFullscreen();
        }

        // Remove the 'in-fullscreen' class from the body
        console.log("Removing 'in-fullscreen' class from the body...");
        document.body.classList.remove("in-fullscreen");
      }
    }

    var load_tabs = true;
  </script>
  <script>
(function () {
  // Check if 'load_tabs' variable exists
  if (typeof load_tabs !== "undefined" && load_tabs) {
    // Check local storage for the name of the saved tab window
    var savedTab = localStorage.getItem("saved_tab_window");
    // If there's a saved tab window, set 'tab-window-display' class to it
    if (savedTab) {
      var tabWindowToDisplay = document.querySelector(
        '.tab-window[name="' + savedTab + '"]'
      );
      if (tabWindowToDisplay) {
        tabWindowToDisplay.classList.add("tab-window-display");
        // Add 'opened-tab' class to the corresponding tab
        var correspondingTab = document.querySelector(
          '.tabs[name="' + savedTab + '"]'
        );
        if (correspondingTab) {
          correspondingTab.classList.add("opened-tab");
        }
      }
    } else {
      // If no saved tab window, set 'tab-window-display' to the highest in the hierarchy
      var highestTabWindow = document.querySelector(".tab-window");
      if (highestTabWindow) {
        highestTabWindow.classList.add("tab-window-display");
        // Add 'opened-tab' class to the corresponding tab
        var correspondingTab = document.querySelector(
          '.tabs[name="' + highestTabWindow.getAttribute("name") + '"]'
        );
        if (correspondingTab) {
          correspondingTab.classList.add("opened-tab");
        }
      }
    }
  }

  // Verify the existence of elements with the class 'tabs'
  var tabs = document.getElementsByClassName("tabs");
  if (tabs.length > 0) {
    // Iterate over all elements with the class 'tabs'
    for (var j = 0; j < tabs.length; j++) {
      var tabName = tabs[j].getAttribute("name");
      // Add event listener for clicks to the 'tabs'
      tabs[j].addEventListener("click", function () {
        // Get the name attribute of the clicked tab
        var clickedTabName = this.getAttribute("name");
        console.log("Clicked tab:", clickedTabName); // Log the clicked tab name
        // Remove 'tab-window-display' from all tab windows
        var allTabWindows = document.getElementsByClassName("tab-window");
        for (var k = 0; k < allTabWindows.length; k++) {
          allTabWindows[k].classList.remove("tab-window-display");
        }
        // Apply 'tab-window-display' to the tab window with the corresponding name
        var tabWindowToShow = document.querySelector(
          '.tab-window[name="' + clickedTabName + '"]'
        );
        if (tabWindowToShow) {
          tabWindowToShow.classList.add("tab-window-display");
          // Save the displayed tab window's name to local storage
          localStorage.setItem("saved_tab_window", clickedTabName);
          console.log("Displayed tab window:", clickedTabName); // Log the displayed tab window name
        }
        // Remove 'opened-tab' class from all tabs
        for (var l = 0; l < tabs.length; l++) {
          tabs[l].classList.remove("opened-tab");
        }
        // Add 'opened-tab' class to the clicked tab
        this.classList.add("opened-tab");
      });
    }
  }
})();


function tabFunc(event, tabName) {
  var i, tabWindow, tablinks;

  // Hide all tab windows
  tabWindow = document.getElementsByClassName("tab-window");
  for (i = 0; i < tabWindow.length; i++) {
    tabWindow[i].style.display = "none";
  }

  // Remove the "openedTab" class from all tab links
  tablinks = document.getElementsByClassName("tab-link");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].classList.remove("opened-tab");
  }

  // Display the selected tab window
  document.getElementById(tabName).style.display = "block";

  // Add the "openedTab" class to the clicked tab link
  event.currentTarget.classList.add("opened-tab");
}

function rembTabFunc(event, tabName) {
  var i, tabWindow, tablinks;

  // Hide all tab windows
  tabWindow = document.getElementsByClassName("tab-window");
  for (i = 0; i < tabWindow.length; i++) {
    tabWindow[i].style.display = "none";
  }

  // Remove the "openedTab" class from all tab links
  tablinks = document.getElementsByClassName("tab-link");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].classList.remove("opened-tab");
  }

  // Display the selected tab window
  document.getElementById(tabName).style.display = "block";

  // Add the "openedTab" class to the clicked tab link
  event.currentTarget.classList.add("opened-tab");

  // Remember the last selected tab using localStorage
  localStorage.setItem("lastTab", tabName);
}

// Function to retrieve the last selected tab when the page loads
function loadTab() {
  var lastTab = localStorage.getItem("lastTab");
  if (lastTab) {
    var allTabs = document.getElementsByClassName("tab-window");
    for (var i = 0; i < allTabs.length; i++) {
      // Hide all tabs except for the last selected one
      if (allTabs[i].id === lastTab) {
        allTabs[i].style.display = "block";
      } else {
        allTabs[i].style.display = "none";
      }
    }

    // Remove the "openedTab" class from all tab links
    var tablinks = document.getElementsByClassName("tab-link");
    for (var j = 0; j < tablinks.length; j++) {
      tablinks[j].classList.remove("opened-tab");
    }

    // Add the "openedTab" class to the corresponding tab link
    var tabLink = document.querySelector(`[data-tab="${lastTab}"]`);
    if (tabLink) {
      tabLink.classList.add("opened-tab");
    }
  }
}

function dragElement(elmnt) {
  var pos1 = 0,
    pos2 = 0,
    pos3 = 0,
    pos4 = 0;
  var dragWindow = elmnt.querySelector(".dragElWind");
  var header = elmnt.querySelector(".dragElHeader");
  var main = elmnt.querySelector(".dragElMain");

  if (header) {
    header.onmousedown = dragMouseDown;
  } else {
    elmnt.onmousedown = dragMouseDown;
  }

  // Set additional styles
  elmnt.style.overflow = "auto";
  elmnt.style.position = "absolute";
  elmnt.style.resize = "both";
  header.style.position = "sticky";
  header.style.top = 0;
  header.style.zIndex = 1;
  dragWindow.style.transition = "width 0s, height 0s";

  function createOverlay() {
    var overlay = document.createElement("div");
    overlay.style.position = "fixed";
    overlay.style.top = 0;
    overlay.style.right = 0;
    overlay.style.bottom = 0;
    overlay.style.left = 0;
    overlay.style.opacity = 0;
    overlay.style.zIndex = 2;
    document.body.appendChild(overlay);
    return overlay;
  }

  function dragMouseDown(e) {
    e = e || window.event;
    e.preventDefault();
    pos3 = e.clientX;
    pos4 = e.clientY;

    // Create transparent overlay for drag
    var dragOverlay = createOverlay();

    document.onmouseup = function () {
      // Remove overlay for drag
      if (dragOverlay.parentNode) {
        dragOverlay.parentNode.removeChild(dragOverlay);
      }

      closeDragElement();
    };
    document.onmousemove = elementDrag;

    // Add resize event listener
    window.addEventListener("resize", handleResize);
  }

  function elementDrag(e) {
    e = e || window.event;
    e.preventDefault();
    pos1 = pos3 - e.clientX;
    pos2 = pos4 - e.clientY;
    pos3 = e.clientX;
    pos4 = e.clientY;

    // Calculate new position
    var newTop = elmnt.offsetTop - pos2;
    var newLeft = elmnt.offsetLeft - pos1;

    // Check if the element is going outside the screen boundaries
    var maxX = window.innerWidth - elmnt.offsetWidth;
    var maxY = window.innerHeight - elmnt.offsetHeight;

    // Adjust position to keep it within the visible area
    elmnt.style.top = Math.max(0, Math.min(newTop, maxY)) + "px";
    elmnt.style.left = Math.max(0, Math.min(newLeft, maxX)) + "px";
  }

  function handleResize() {
    // Create transparent overlay for resize
    var resizeOverlay = createOverlay();

    // Remove overlay for resize after a short delay
    setTimeout(function () {
      if (resizeOverlay.parentNode) {
        resizeOverlay.parentNode.removeChild(resizeOverlay);
      }
    }, 200);
  }

  function closeDragElement() {
    document.onmouseup = null;
    document.onmousemove = null;

    // Remove resize event listener
    window.removeEventListener("resize", handleResize);
  }
}

// Apply dragElement to all elements with class "dragElWind"
var draggableElements = document.querySelectorAll(".dragElWind");
draggableElements.forEach(function (element) {
  dragElement(element);
});

// Cocell's Show Hide Script
function CShowHide(arg) {
  var args = arg.split(", ");
  var targetId = args[0];
  var displayValue = args[1];

  var targetElement = document.getElementById(targetId);

  if (targetElement) {
    if (
      targetElement.style.display === "none" ||
      getComputedStyle(targetElement).display === "none"
    ) {
      targetElement.style.display = displayValue;
    } else {
      targetElement.style.display = "none";
    }
  }
}

// Close Parent Script
function closeParent(elementId) {
  if (elementId) {
    var specificElement = document.getElementById(elementId);
    if (specificElement) {
      specificElement.style.display = "none";
    } else {
      console.error("Element with ID " + elementId + " not found.");
    }
  } else {
    var parentElement = this.parentElement;

    if (parentElement) {
      parentElement.style.display = "none";
    }
  }
}

/*
// Darkmode Script
function darkmode() {
  try {
    const body = document.body;
    body.classList.toggle("dark");

    const isDarkModeEnabled = body.classList.contains("dark");
    localStorage.setItem("darkMode", isDarkModeEnabled);
  } catch (error) {
    console.error("An error occurred while toggling dark mode:", error);
  }
}

window.onload = function () {
  try {
    const savedDarkMode = localStorage.getItem("darkMode");
    const body = document.body;

    if (savedDarkMode === null) {
      const prefersDarkMode = window.matchMedia(
        "(prefers-color-scheme: dark)"
      ).matches;

      if (prefersDarkMode) {
        body.classList.add("dark");
        localStorage.setItem("darkMode", true);
      }
    } else {
      if (savedDarkMode === "true") {
        body.classList.add("dark");
      }
    }
  } catch (error) {
    console.error("An error occurred during dark mode initialization:", error);
  }
};

// Your crucial function for dark mode
function darkModeInitialization(callback) {
  try {
    const savedDarkMode = localStorage.getItem("darkMode");
    const body = document.body;

    if (savedDarkMode === null) {
      const prefersDarkMode = window.matchMedia(
        "(prefers-color-scheme: dark)"
      ).matches;

      if (prefersDarkMode) {
        body.classList.add("dark");
        localStorage.setItem("darkMode", true);
      }
    } else {
      if (savedDarkMode === "true") {
        body.classList.add("dark");
      }
    }

    // Call the callback to signal that dark mode initialization is done
    callback();
  } catch (error) {
    console.error(
      "An error occurred during dark mode initialization:",
      error
    );
    // Still call the callback in case of error
    callback();
  }
}

// Call the dark mode initialization function
darkModeInitialization(function () {
  // This code will execute only after the dark mode initialization is done
  const darkModeToggle = document.getElementById("dark-mode-toggle");

  if (darkModeToggle) {
    darkModeToggle.addEventListener("click", darkmode);
  } else {
    console.error("Dark mode toggle button not found");
  }
});
*/

// IIFE to check and apply dark mode based on local storage or system preference
(function () {
  const storedDarkMode = localStorage.getItem("darkMode");
  const systemPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

  if (storedDarkMode === "true" || (storedDarkMode === null && systemPrefersDark)) {
    document.documentElement.classList.add("dark");
  }
})();

// Function to toggle dark mode and save the state in local storage
function darkmode() {
  const rootElement = document.documentElement;
  const darkModeEnabled = rootElement.classList.toggle("dark");
  localStorage.setItem("darkMode", darkModeEnabled.toString());
}

// Fullscreen Script
function fullscreen() {
  try {
    var docElement = document.documentElement;

    if (
      !document.fullscreenElement &&
      !document.mozFullScreenElement &&
      !document.webkitFullscreenElement
    ) {
      if (docElement.requestFullscreen) {
        docElement.requestFullscreen();
      } else if (docElement.mozRequestFullScreen) {
        docElement.mozRequestFullScreen();
      } else if (docElement.webkitRequestFullscreen) {
        docElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
      } else if (docElement.msRequestFullscreen) {
        docElement.msRequestFullscreen();
      }
    } else {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
      } else if (document.webkitExitFullscreen) {
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) {
        document.msExitFullscreen();
      }
    }
  } catch (error) {
    console.error("An error occurred while toggling fullscreen:", error);
  }
}

// $Fullscreen Script
// This is a new version which adds a class to the body to indicate fullscreen which can be
// Used for styling purposes.
function $Fullscreen() {
  // Check if fullscreen mode is currently active
  var isInFullScreen =
    (document.fullscreenElement && document.fullscreenElement !== null) ||
    (document.webkitFullscreenElement &&
      document.webkitFullscreenElement !== null) ||
    (document.mozFullScreenElement &&
      document.mozFullScreenElement !== null) ||
    (document.msFullscreenElement && document.msFullscreenElement !== null);

  // If not in fullscreen, request fullscreen
  if (!isInFullScreen) {
    var element = document.documentElement;
    if (element.requestFullscreen) {
      element.requestFullscreen();
    } else if (element.mozRequestFullScreen) {
      /* Firefox */
      element.mozRequestFullScreen();
    } else if (element.webkitRequestFullscreen) {
      /* Chrome, Safari & Opera */
      element.webkitRequestFullscreen();
    } else if (element.msRequestFullscreen) {
      /* IE/Edge */
      element.msRequestFullscreen();
    }

    // Add the 'in-fullscreen' class to the body
    document.body.classList.add("in-fullscreen");
  } else {
    // If already in fullscreen, exit fullscreen
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.webkitExitFullscreen) {
      /* Safari */
      document.webkitExitFullscreen();
    } else if (document.mozCancelFullScreen) {
      /* Firefox */
      document.mozCancelFullScreen();
    } else if (document.msExitFullscreen) {
      /* IE/Edge */
      document.msExitFullscreen();
    }

    // Remove the 'in-fullscreen' class from the body
    document.body.classList.remove("in-fullscreen");
  }
}

function modalImage() {
  var modalImages = document.querySelectorAll(".modal-image");

  modalImages.forEach(function (modalImage) {
    modalImage.style.cursor = "pointer"; // Set cursor to pointer for modal images

    modalImage.addEventListener("click", function () {
      var imageUrl = this.getAttribute("src");

      // Background container
      var backgroundContainer = document.createElement("div");
      backgroundContainer.className = "modal-image-background-container";

      // Modal container
      var modalContainer = document.createElement("div");
      modalContainer.className = "modal-image-container";

      // Image element
      var imageElement = document.createElement("img");
      imageElement.src = imageUrl;
      imageElement.alt = "Modal Image";

      // Append image to modal container
      modalContainer.appendChild(imageElement);

      // Append modal container to background container
      backgroundContainer.appendChild(modalContainer);

      // Append background container to body
      document.body.appendChild(backgroundContainer);

      // Apply styles to the modal elements
      backgroundContainer.style.display = "flex";
      backgroundContainer.style.position = "fixed";
      backgroundContainer.style.top = "0";
      backgroundContainer.style.left = "0";
      backgroundContainer.style.bottom = "0";
      backgroundContainer.style.right = "0";
      backgroundContainer.style.width = "100%";
      backgroundContainer.style.height = "100%";
      backgroundContainer.style.background = "#00000098";
      backgroundContainer.style.justifyContent = "center";
      backgroundContainer.style.alignItems = "center";
      backgroundContainer.style.zIndex = "9999999999"; // You might want to adjust this value
      backgroundContainer.style.transition = "background 0.5s";
      backgroundContainer.style.cursor = "zoom-out";

      modalContainer.style.maxWidth = "80%";
      modalContainer.style.maxHeight = "80%";
      modalContainer.style.transform = "scale(0)";
      modalContainer.style.transition = "transform 0.25s";

      imageElement.style.width = "100%";
      imageElement.style.height = "auto";
      imageElement.style.cursor = "zoom-out";

      // Open modal with zoom effect
      setTimeout(function () {
        backgroundContainer.style.background = "#000000cc";
        modalContainer.style.transform = "scale(1.2)"; // Start with zoomed-in scale
        setTimeout(function () {
          modalContainer.style.transform = "scale(1)"; // Animate to normal scale
        }, 180); // Adjust the time based on your preference
      }, 10);

      // Close modal on background click with zoom out effect
      backgroundContainer.addEventListener("click", closeModal);

      // Close modal on Escape key press
      document.addEventListener("keydown", function (event) {
        if (event.key === "Escape") {
          closeModal();
        }
      });

      // Prevent mouse scroll while the modal is open
      document.body.style.overflow = "hidden";

      function closeModal() {
        backgroundContainer.style.background = "#00000000";
        modalContainer.style.transform = "scale(0)";
        setTimeout(function () {
          backgroundContainer.style.display = "none";
          document.body.removeChild(backgroundContainer);
        }, 300);

        // Allow mouse scroll when the modal is closed
        document.body.style.overflow = "auto";
      }
    });
  });
}

// Copy Text OnClick Function
function copyText(copyEl) {
  let textToCopy;

  if (copyEl === undefined || copyEl === null) {
    console.error("Invalid element provided");
    return;
  }

  if (typeof copyEl === "string") {
    const elementById = document.getElementById(copyEl);

    if (!elementById) {
      console.error(`Element with ID '${copyEl}' not found`);
      return;
    }

    textToCopy = elementById.textContent || elementById.innerText;
  } else if (copyEl instanceof Element) {
    textToCopy = copyEl.textContent || copyEl.innerText;
  } else {
    console.error("Invalid parameter provided");
    return;
  }

  const tempTextarea = document.createElement("textarea");
  tempTextarea.value = textToCopy;
  document.body.appendChild(tempTextarea);
  tempTextarea.select();
  tempTextarea.setSelectionRange(0, 99999); // For mobile devices
  document.execCommand("copy");
  document.body.removeChild(tempTextarea);
  console.log(`Text copied to clipboard: ${textToCopy}`);
}

// Close Elements Function
function closeEl(element) {
  if (element === undefined || element === null) {
    const parent = this.parentElement;
    if (parent) {
      parent.style.display = "none";
    } else {
      console.error("Parent element not found");
    }
  } else if (typeof element === "string") {
    const elementById = document.getElementById(element);

    if (!elementById) {
      console.error(`Element with ID '${element}' not found`);
      return;
    }

    elementById.style.display = "none";
  } else {
    const parent = element.parentElement;
    if (parent) {
      parent.style.display = "none";
    } else {
      console.error("Parent element not found");
    }
  }
}

// Show Elements Function
function showEl(elementId, displayValue = "block") {
  const element = document.getElementById(elementId);

  if (!element) {
    console.error(`Element with ID '${elementId}' not found`);
    return;
  }

  element.style.display = displayValue;
}

// Function Calls
modalImage();

// Function to truncate text to a specified number of words
function truncateText(text, maxLength) {
  const words = text.split(" ");
  if (words.length <= maxLength) {
    return text;
  }
  return words.slice(0, maxLength).join(" ");
}

function search(containerId) {
  var filter = document.querySelector('input[type="text"]').value;
  var container, elements, i, querElement, querText, serElement, serText;

  // Remove special characters from the search query using regular expression
  filter = filter
    .replace(/[^\w\s]/g, "")
    .trim()
    .toLowerCase();

  container = document.getElementById(containerId);
  elements = container.querySelectorAll("[quer]");

  for (i = 0; i < elements.length; i++) {
    querElement = elements[i].getAttribute("quer");
    serElement = elements[i].querySelector("[ser]"); // Get the first element with ser attribute

    if (serElement) {
      serText = serElement.textContent || serElement.innerText;
      // Remove special characters from text content using regular expression
      querText = serText.replace(/[^\w\s]/g, "").toLowerCase();
    } else {
      querText = querElement.toLowerCase();
    }

    // Use includes() for case-insensitive comparison
    if (querText.includes(filter)) {
      elements[i].style.display = "";
    } else {
      elements[i].style.display = "none";
    }
  }
}
</script>
</body>

<style>
  @keyframes chat-backdrop-open {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }

  @keyframes chat-backdrop-close {
    from {
      opacity: 1;
    }

    to {
      opacity: 0;
    }
  }

  .chat-create-backdrop {
    width: 100%;
    height: 100%;
    transition: visibility 0.2s, opacity 0.2s;
    position: fixed;
    top: 0;
    left: 0;
    opacity: 1;
    background: var(--backdrop-light);
    animation: chat-backdrop 0.3s;
  }

  .dark .chat-create-backdrop {
    background: var(--backdrop-dark);
  }

  @keyframes chat-overlay-open {
    from {
      opacity: 0;
      transform: scale(0.9)
    }

    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes chat-overlay-close {
    from {
      opacity: 1;
      transform: scale(1)
    }

    to {
      opacity: 0;
      transform: scale(0.9);
    }
  }

  .custom-chat-window {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 3;
  }

  .custom-chat-window[closed] .chat-create-backdrop {
    animation-name: chat-backdrop-close;
  }

  .chat-overlay {
    animation: chat-overlay-open 0.3s cubic-bezier(1, -0.5, 0.5, 2) 1;
    z-index: 3;
    width: 100%;
    padding: 5px;
    display: flex;
    justify-content: center;
  }

  .custom-chat-window[closed] .chat-overlay {
    animation-name: chat-overlay-close;
  }

  .chat-form {
    text-align: left;
    max-width: 250px;
    width: 100%;
    padding: 10px;
    background: var(--vanilla-velour);
    z-index: 3;
    border-radius: var(--d-1rem);
  }

  .dark .chat-form {
    background: #181818;
  }

  .chat-form input {
    background: var(--cool-platinum);
  }

  .chat-form-container {
    display: flex;
    flex-direction: column;
    gap: 5px;
  }

  .chat-form-container div {
    display: flex;
    flex-direction: column;
  }

  .chat-form-container label {
    display: block;
    font-size: 0.8rem;
    user-select: none;
  }

  #channelName {
    margin-bottom: 5px;
  }

  .tabs-wrapper {
    position: relative;
    overflow: visible;
  }

  .tabs-icon {
    overflow: hidden;
  }

  .custom-chat-del {
    position: absolute;
    right: 0;
    height: 100%;
    width: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .custom-chat-del:active {
    font-size: 0.8rem;
    transition-property: font-size;
    transition-duration: 0.1s;
    transition-timing-function: cubic-bezier(1, -0.5, 0.5, 3);
  }
</style>